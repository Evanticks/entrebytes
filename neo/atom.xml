<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-09-30T07:17:06.776Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Instalación automatizada basada en medio de almacenamiento extraíble.</title>
    <link href="http://example.com/2022/09/30/preseed/"/>
    <id>http://example.com/2022/09/30/preseed/</id>
    <published>2022-09-30T07:12:30.816Z</published>
    <updated>2022-09-30T07:17:06.776Z</updated>
    
    <content type="html"><![CDATA[<p>He comenzado descargando el archivo iso para poder abrirlo y colocar el preseed en él, el comando que he utilizado es xorriso.<br>Tras esto he utilizado una plantilla de la web de debian</p><p><a href="https://www.debian.org/releases/buster/example-preseed.txt">https://www.debian.org/releases/buster/example-preseed.txt</a></p><p>Tras esto he estado configurando preseed.cfg para poner la hora, el país y el teclado en español y resulta que estuve un tiempo estancado en esto porque hay que corroborar los cambios en el archivo isofiles&#x2F;isolinux&#x2F;txt.cfg<br>A su vez también debemos indicar la ruta donde vama a estar el preseed para que el sistema lo localice, en mi caso estará en la raíz de la ISO (CDROM)</p><pre><code>label install        menu label ^Install        kernel /install.amd/vmlinuz        append vga=788 initrd=/install.amd/initrd.gz --- quietlabel unattended-gnome menu label ^Instalación Debian Desatendida Preseed Antonio kernel /install.amd/gtk/vmlinuz append vga=788 initrd=/install.amd/gtk/initrd.gz preseed/file=/cdrom/preseed.cfg locale=es_ES console-setup/ask_detect=false keyboard-configuration/xkb-keymap=es</code></pre><p>Al tener que desensamblar y ensamblar constantemente el iso para poner el preseed actualizado llegó un momento en el que se hacía inviable seguir probando sin hacer un script con los pasos que se repetían, entonces lo realicé:</p><pre><code>#!/usr/bin/env bashfichero=/home/antonio/Descargas/preseed-instalacion/preseed-debian-10.1.0-amd64-script-netinst.isochmod u+w isofilescp preseed.cfg ~/Descargas/preseed-instalacion/isofileschmod u-w isofilescd ~/Descargas/preseed-instalacionchmod a+w isofiles/isolinux/isolinux.binif [ -f $fichero ]then        rm -f $ficherofi      genisoimage -r -J -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -o preseed-debian-10&gt;</code></pre><p>Tuve que meter la condición de que si el iso creado existía lo borrara porque al ejecutar genisoimage si el nombre ya existe provoca conflictos.</p><p>Entonces estuve probando, metiendo el usuario de la máquina con la contraseña sin encriptar, para ver el funcionamiento y que lo anterior configurado fuese por buen camino.</p><p>Estuve probando formas de encriptar la contraseña, la plantilla me recomendaba que usara  <strong>Crypt 3</strong> pero es un método muy vulnerable, así que mirando la documentación vi que podía meter un hash <strong>md5</strong>.</p><p>Entonces empecé a encriptar la contraseña, para ello utilicé <code>mkpasswd -m sha-512</code> el cual al ingresar la contraseña me la devuelve encriptada, activo la opción de <code>d-i passwd/user-password-crypted password</code> junto con la contraseña encriptada</p><p>Ya entonces, con la localización y el teclado en español, la cuenta del usuario con su contraseña encriptada decido comenzar a realizar las particiones de lvm.<br>Tuve muchísimos errores de sintaxis pero gracias al script podía probar de manera más rápida las diferentes combinaciones de particionado y ajustando la sintaxis conseguí realizarlo:</p><p><img src="/images/ASO-PRACTICA1.png" alt="Descripción de la imagen"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;He comenzado descargando el archivo iso para poder abrirlo y colocar el preseed en él, el comando que he utilizado es xorriso.&lt;br&gt;Tras es</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Compilar en debian</title>
    <link href="http://example.com/2022/09/30/Compilar-en-debian/"/>
    <id>http://example.com/2022/09/30/Compilar-en-debian/</id>
    <published>2022-09-30T06:41:07.316Z</published>
    <updated>2022-09-30T06:43:29.536Z</updated>
    
    <content type="html"><![CDATA[<h2 id="apt-source-lvm2"><a href="#apt-source-lvm2" class="headerlink" title="apt source lvm2"></a>apt source lvm2</h2><p>nos metemos en la carpeta lvm2 y leemos el archivo.dsc<br>luego buscamos el archivo makefile y si no lo tenemos pues hacemos <strong>.&#x2F;configure</strong> , necesitaremos las dependencias así que procuraremos hacer un <code>apt build-dep lvm2</code>,<br>con esto instalará las dependencias, y una vez hecho esto compilamos de dos maneras:</p><ul><li>haciendo un make, una vez compilado realizamos un <code>make install</code></li><li>Otra forma de compilar el código fuente es de esta manera: <code>dpkg-buildpackage -b</code></li></ul><p>para diseccionar un paquete .deb utilizamos <code>ar -x loquesea.deb</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;apt-source-lvm2&quot;&gt;&lt;a href=&quot;#apt-source-lvm2&quot; class=&quot;headerlink&quot; title=&quot;apt source lvm2&quot;&gt;&lt;/a&gt;apt source lvm2&lt;/h2&gt;&lt;p&gt;nos metemos en la </summary>
      
    
    
    
    
  </entry>
  
</feed>
